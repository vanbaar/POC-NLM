/**
 * This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/.
 */

'use strict';

module.exports = function (ptor) {
  ptor.By.addLocator('uiSref', function (toState, opt_parentElement) {
    var using = opt_parentElement || document;
    var uiSrefNodes = using.querySelectorAll('[ui-sref="' + toState +'"]');
    var dataUiSrefNodes = using.querySelectorAll('[data-ui-sref="' + toState +'"]');
    var possibleElements = Array.prototype.slice.call(uiSrefNodes).concat(Array.prototype.slice.call(dataUiSrefNodes));

    var result;

    if (possibleElements.length === 1) {
      result = possibleElements[0];
    } else if (possibleElements.length > 1) {
      result = possibleElements;
    }

    return result;
  });
};
